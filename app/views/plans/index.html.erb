<div class="mx-auto max-w-7xl">
  <h1 class="text-3xl font-bold mb-4">自分の予定</h1>

  <div id="flash-message">
    <%= render 'shared/flash' %>
  </div>

  <div class="-mx-4 overflow-x-auto">
    <div class="inline-block min-w-full shadow-md rounded-lg overflow-hidden">
      <table class="min-w-full">
        <thead class="bg-gray-50">
          <tr class="border-b border-gray-200">
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">タイトル</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">期間</th>
            <th colspan="3"></th>
          </tr>
        </thead>

        <tbody class="bg-white divide-y divide-gray-200">
          <% @plans.each do |plan| %>
            <tr id="plan-<%=plan.id %>">
              <td class="px-6 py-4 whitespace-nowrap"><div class="<%= plan_color_class(plan) %>"><%= plan.plan_name %></div></td>
              <td class="px-6 py-4 whitespace-nowrap"><%= plan.start_time&.strftime("%m/%d %H:%M") %>~<%= plan.end_time&.strftime("%m/%d %H:%M") %></td>
              <td class="px-6 py-4 whitespace-nowrap"><%= link_to 'Show', plan %></td>
              <td class="px-6 py-4 whitespace-nowrap"><%= link_to 'Edit', edit_plan_path(plan.id) %></td>
              <td class="px-6 py-4 whitespace-nowrap"><%= link_to "削除", plan_path(plan), method: :delete, data: { confirm: "本当に削除しますか？" }, remote: true %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>

  <div class="flex justify-center">
    <%= link_to '予定作成', new_plan_path, class: "inline-flex items-center px-4 py-2 bg-blue-500 border border-transparent rounded-md font-semibold text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500" %>
  </div>
</div>

<%= month_calendar events: @plans do |date, plans| %>
  <%= date.day %>

  <% plans.each do |plan| %>
    <div class="<%= plan_color_class(plan) %> plan-calendar-<%= plan.id %>">
      <%= link_to plan.plan_name, plan, class: "text-gray-800 hover:opacity-75" %>
    </div>
  <% end %>
<% end %>
